!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Player=t():e.Player=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=17)}([function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;l<r;l++)u[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){e.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(6),r=n(0),o=n(21),s=n(23),a=function(e,t,n){var l,u,c,f=e&a.F,d=e&a.G,h=e&a.S,p=e&a.P,v=e&a.B,y=e&a.W,m=d?r:r[t]||(r[t]={}),g=m.prototype,b=d?i:h?i[t]:(i[t]||{}).prototype;d&&(n=t);for(l in n)(u=!f&&b&&void 0!==b[l])&&l in m||(c=u?b[l]:n[l],m[l]=d&&"function"!=typeof b[l]?n[l]:v&&u?o(c,i):y&&b[l]==c?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((m.virtual||(m.virtual={}))[l]=c,e&a.R&&g&&!g[l]&&s(g,l,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){/*!    SWFObject v2.3.20120118 <http://github.com/swfobject/swfobject>
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
!function(t,n){e.exports=n()}(0,function(){function e(){if(!V&&document.getElementsByTagName("body")[0]){try{var e,t=m("span");t.style.display="none",e=j.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(e){return}V=!0;for(var n=U.length,i=0;i<n;i++)U[i]()}}function t(e){V?e():U[U.length]=e}function n(e){if(typeof M.addEventListener!=P)M.addEventListener("load",e,!1);else if(typeof j.addEventListener!=P)j.addEventListener("load",e,!1);else if(typeof M.attachEvent!=P)b(M,"onload",e);else if("function"==typeof M.onload){var t=M.onload;M.onload=function(){t(),e()}}else M.onload=e}function i(){var e=j.getElementsByTagName("body")[0],t=m(k);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",C);var n=e.appendChild(t);if(n){var i=0;!function o(){if(typeof n.GetVariable!=P)try{var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),H.pv=[g(s[0]),g(s[1]),g(s[2])])}catch(e){H.pv=[8,0,0]}else if(i<10)return i++,void setTimeout(o,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=D.length;if(e>0)for(var t=0;t<e;t++){var n=D[t].id,i=D[t].callbackFn,r={success:!1,id:n};if(H.pv[0]>0){var u=y(n);if(u)if(!w(D[t].swfVersion)||H.wk&&H.wk<312)if(D[t].expressInstall&&s()){var c={};c.data=D[t].expressInstall,c.width=u.getAttribute("width")||"0",c.height=u.getAttribute("height")||"0",u.getAttribute("class")&&(c.styleclass=u.getAttribute("class")),u.getAttribute("align")&&(c.align=u.getAttribute("align"));for(var f={},d=u.getElementsByTagName("param"),h=d.length,p=0;p<h;p++)"movie"!=d[p].getAttribute("name").toLowerCase()&&(f[d[p].getAttribute("name")]=d[p].getAttribute("value"));a(c,f,n,i)}else l(u),i&&i(r);else _(n,!0),i&&(r.success=!0,r.ref=o(n),r.id=n,i(r))}else if(_(n,!0),i){var v=o(n);v&&typeof v.SetVariable!=P&&(r.success=!0,r.ref=v,r.id=v.id),i(r)}}}function o(e){var t=null,n=y(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==P?n:n.getElementsByTagName(k)[0]||n),t}function s(){return!W&&w("6.0.65")&&(H.win||H.mac)&&!(H.wk&&H.wk<312)}function a(e,t,n,i){var r=y(n);if(n=v(n),W=!0,L=i||null,A={success:!1,id:n},r){"OBJECT"==r.nodeName.toUpperCase()?(E=u(r),O=null):(E=r,O=n),e.id=I,(typeof e.width==P||!/%$/.test(e.width)&&g(e.width)<310)&&(e.width="310"),(typeof e.height==P||!/%$/.test(e.height)&&g(e.height)<137)&&(e.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var o=H.ie?"ActiveX":"PlugIn",s="MMredirectURL="+encodeURIComponent(M.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+j.title;if(typeof t.flashvars!=P?t.flashvars+="&"+s:t.flashvars=s,H.ie&&4!=r.readyState){var a=m("div");n+="SWFObjectNew",a.setAttribute("id",n),r.parentNode.insertBefore(a,r),r.style.display="none",h(r)}f(e,t,n)}}function l(e){if(H.ie&&4!=e.readyState){e.style.display="none";var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),h(e)}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=m("div");if(H.win&&H.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(k)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;o<r;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function c(e,t){var n=m("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function f(e,t,n){var i,r=y(n);if(n=v(n),H.wk&&H.wk<312)return i;if(r){var o,s,a,l=m(H.ie?"div":k);typeof e.id==P&&(e.id=n);for(a in t)t.hasOwnProperty(a)&&"movie"!==a.toLowerCase()&&d(l,a,t[a]);H.ie&&(l=c(e.data,l.innerHTML));for(o in e)e.hasOwnProperty(o)&&(s=o.toLowerCase(),"styleclass"===s?l.setAttribute("class",e[o]):"classid"!==s&&"data"!==s&&l.setAttribute(o,e[o]));H.ie?B[B.length]=e.id:(l.setAttribute("type",C),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),i=l}return i}function d(e,t,n){var i=m("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=y(e);t&&"OBJECT"==t.nodeName.toUpperCase()&&(H.ie?(t.style.display="none",function e(){if(4==t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function p(e){return e&&e.nodeType&&1===e.nodeType}function v(e){return p(e)?e.id:e}function y(e){if(p(e))return e;var t=null;try{t=j.getElementById(e)}catch(e){}return t}function m(e){return j.createElement(e)}function g(e){return parseInt(e,10)}function b(e,t,n){e.attachEvent(t,n),R[R.length]=[e,t,n]}function w(e){e+="";var t=H.pv,n=e.split(".");return n[0]=g(n[0]),n[1]=g(n[1])||0,n[2]=g(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function x(e,t,n,i){var r=j.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(F=null,T=null),!F||T!=o){var s=m("style");s.setAttribute("type","text/css"),s.setAttribute("media",o),F=r.appendChild(s),H.ie&&typeof j.styleSheets!=P&&j.styleSheets.length>0&&(F=j.styleSheets[j.styleSheets.length-1]),T=o}F&&(typeof F.addRule!=P?F.addRule(e,t):typeof j.createTextNode!=P&&F.appendChild(j.createTextNode(e+" {"+t+"}")))}}function _(e,t){if(q){var n=t?"visible":"hidden",i=y(e);V&&i?i.style.visibility=n:"string"==typeof e&&x("#"+e,"visibility:"+n)}}function S(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=P?encodeURIComponent(e):e}var E,O,L,A,F,T,P="undefined",k="object",C="application/x-shockwave-flash",I="SWFObjectExprInst",M=window,j=document,N=navigator,$=!1,U=[],D=[],B=[],R=[],V=!1,W=!1,q=!0,z=!1,H=function(){var e=typeof j.getElementById!=P&&typeof j.getElementsByTagName!=P&&typeof j.createElement!=P,t=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),i=/win/.test(n?n:t),r=/mac/.test(n?n:t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),s="Microsoft Internet Explorer"===N.appName,a=[0,0,0],l=null;if(typeof N.plugins!=P&&typeof N.plugins["Shockwave Flash"]==k)(l=N.plugins["Shockwave Flash"].description)&&typeof N.mimeTypes!=P&&N.mimeTypes[C]&&N.mimeTypes[C].enabledPlugin&&($=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=g(l.replace(/^(.*)\..*$/,"$1")),a[1]=g(l.replace(/^.*\.(.*)\s.*$/,"$1")),a[2]=/[a-zA-Z]/.test(l)?g(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof M.ActiveXObject!=P)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");u&&(l=u.GetVariable("$version"))&&(s=!0,l=l.split(" ")[1].split(","),a=[g(l[0]),g(l[1]),g(l[2])])}catch(e){}return{w3:e,pv:a,wk:o,ie:s,win:i,mac:r}}();!function(){H.w3&&((typeof j.readyState!=P&&("complete"===j.readyState||"interactive"===j.readyState)||typeof j.readyState==P&&(j.getElementsByTagName("body")[0]||j.body))&&e(),V||(typeof j.addEventListener!=P&&j.addEventListener("DOMContentLoaded",e,!1),H.ie&&(j.attachEvent("onreadystatechange",function t(){"complete"==j.readyState&&(j.detachEvent("onreadystatechange",t),e())}),M==top&&function t(){if(!V){try{j.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}e()}}()),H.wk&&function t(){if(!V)return/loaded|complete/.test(j.readyState)?void e():void setTimeout(t,0)}()))}();U[0]=function(){$?i():r()};!function(){H.ie&&window.attachEvent("onunload",function(){for(var e=R.length,t=0;t<e;t++)R[t][0].detachEvent(R[t][1],R[t][2]);for(var n=B.length,i=0;i<n;i++)h(B[i]);for(var r in H)H[r]=null;if(H=null,"undefined"!=typeof swfobject){for(var o in swfobject)swfobject[o]=null;swfobject=null}})}();return{registerObject:function(e,t,n,i){if(H.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,D[D.length]=r,_(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(H.w3)return o(e)},embedSWF:function(e,n,i,r,o,l,u,c,d,h){var p=v(n),y={success:!1,id:p};H.w3&&!(H.wk&&H.wk<312)&&e&&n&&i&&r&&o?(_(p,!1),t(function(){i+="",r+="";var t={};if(d&&typeof d===k)for(var v in d)t[v]=d[v];t.data=e,t.width=i,t.height=r;var m={};if(c&&typeof c===k)for(var g in c)m[g]=c[g];if(u&&typeof u===k)for(var b in u)if(u.hasOwnProperty(b)){var x=z?encodeURIComponent(b):b,S=z?encodeURIComponent(u[b]):u[b];typeof m.flashvars!=P?m.flashvars+="&"+x+"="+S:m.flashvars=x+"="+S}if(w(o)){var E=f(t,m,n);t.id==p&&_(p,!0),y.success=!0,y.ref=E,y.id=E.id}else{if(l&&s())return t.data=l,void a(t,m,n,h);_(p,!0)}h&&h(y)})):h&&h(y)},switchOffAutoHideShow:function(){q=!1},enableUriEncoding:function(e){z=typeof e===P||e},ua:H,getFlashPlayerVersion:function(){return{major:H.pv[0],minor:H.pv[1],release:H.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(e,t,n){return H.w3?f(e,t,n):void 0},showExpressInstall:function(e,t,n,i){H.w3&&s()&&a(e,t,n,i)},removeSWF:function(e){H.w3&&h(e)},createCSS:function(e,t,n,i){H.w3&&x(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=j.location.search||j.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return S(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return S(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=y(I);e&&E&&(e.parentNode.replaceChild(E,e),O&&(_(O,!0),H.ie&&(E.style.display="block")),L&&L(A)),W=!1}},version:"2.3"}})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){var e,t={},n=navigator.userAgent.toLowerCase();(e=n.match(/msie ([\d.]+)/))?t.ie=e[1]:(e=n.match(/firefox\/([\d.]+)/))?t.firefox=e[1]:(e=n.match(/chrome\/([\d.]+)/))?t.chrome=e[1]:(e=n.match(/opera.([\d.]+)/))?t.opera=e[1]:(e=n.match(/version\/([\d.]+).*safari/))&&(t.safari=e[1]);var i=navigator.userAgent;return t.isAndroid=!!i.match(/android/gi),t.isIos=!!i.match(/iphone|ipod/gi),t.isIpad=!!i.match(/ipad/gi),t.isIos9=!!i.match(/OS 9/gi),t.isYx=!!i.match(/MailMaster_Android/i),t.isNewsapp=!!i.match(/newsapp/i),t.isWeixin=/MicroMessenger/gi.test(i),t.isYixin=/yixin/gi.test(i),t.isQQ=/qq/gi.test(i),t.isandroid2_x=t.isAndroid&&/android\s?2\./gi.test(i),t.isIEMobile=!t.isAndroid&&!t.isIos&&/MSIE/gi.test(i),t.trident=i.indexOf("Trident")>-1,t.presto=i.indexOf("Presto")>-1,t.webKit=i.indexOf("AppleWebKit")>-1,t.gecko=i.indexOf("Gecko")>-1&&-1==i.indexOf("KHTML"),t.ios=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t.android=i.indexOf("Android")>-1,t.iPhone=i.indexOf("iPhone")>-1||i.indexOf("Mac")>-1,t.iPad=i.indexOf("iPad")>-1,t.webApp=-1==i.indexOf("Safari"),t.google=i.indexOf("Chrome")>-1,t.mobile=t.ios||t.android,t.language=(navigator.browserLanguage||navigator.language).toLowerCase(),t.qq=i.indexOf("QQ")>-1,t.detachFlash=function(){if(navigator.mimeTypes.length>0){var e=navigator.mimeTypes["application/x-shockwave-flash"];return null!=e&&null!=e.enabledPlugin}if(self.ActiveXObject)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(e){return!1}}(),t})},function(e,t,n){var i=n(24),r=n(25),o=n(27),s=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(30),r=n(39);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(13),r=n(14);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(14);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),r=n.n(i),o=n(42),s=n.n(o),a=n(46),l=n.n(a),u=n(1),c=n.n(u),f=n(48),d=n.n(f),h=n(2),p=n.n(h),v=n(8),y=n(9),m={launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()},exitFullscreen:function(e){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()},sendStat:function(e){if(!e)return console.log("sendStat data ???"),!1},time:function(e){e=parseInt(e);var t="",n=Math.floor(e/3600),i=Math.floor(e/60)%60;return e%=60,t+=0===n?"":n<10?"0"+n+":":n+":",t+=0===i?"00:":i<10?"0"+i+":":i+":",t+=e<10?"0"+e:e},getParams:function(){var e={account:"KLive"};return document&&(e.domain=document.domain||"",e.url=document.URL||"",e.title=document.title||"",e.referrer=document.referrer||""),window&&window.screen&&(e.sh=window.screen.height||0,e.sw=window.screen.width||0,e.cd=window.screen.colorDepth||0),navigator&&(e.lang=navigator.language||""),e}},g=function(){return!!document.createElement("video").canPlayType}(),b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c()(this,e);var i=this.observer=new p.a;if(i.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i),this.isPlaying=!1,!t)return!1;this.filesIndex=0,this.preDuration=0,this.uuid=this.getUUID(),this.box=t,this.initFnArr=[];var r=this;return this.on("init",function(){r.inited=!0;for(var e=r.initFnArr.length,t=0;t<e;t++)r.initFnArr[t].call(r);r.initFnArr=[]}),this.on("onMetaData",function(e,t){r.vod&&1===r.vod.length&&(r.totalDuration=parseInt(t.duration))}),this.on("NetStream.Play.Stop",function(){r.handlerEnd()}),window.addEventListener("beforeunload",function(){r&&r.sendOnPlayDone(),console.log("beforeUnload event!")}),this.setup(n),this}return d()(e,null,[{key:"appendPlayer",value:function(t,n){return new e(t,n).setup(n)}}]),d()(e,[{key:"getUUID",value:function(){return Date.now().toString(16)+Math.random().toString(16)}},{key:"addInitLoadEvent",value:function(e){this.inited?e.call(this):this.initFnArr[this.initFnArr.length]=e}}]),e}();t.default=b,b.prototype.setVolume=function(e){return this.action("setVolume",e)},b.prototype.setSeek=function(e){if(this.vod&&this.vod.length){var t=e/100*this.totalDuration,n=0,i=0;if(this.vod.length>1){for(var r=0,o=this.vod.length;r<o;r++){var s=this.vod[r];if("duration"in s&&(t-=s.duration),t<0){n=r;break}}i=parseInt(this.vod[n].duration+t)}else i=parseInt(t);this.filesIndex!==n?(this.setFilesIndex(n),this.action("play",this.vod[n].mp4,i)):this.action("seek",i)}},b.prototype.togglePause=function(){this.isPlaying=this.action("togglePause")},b.prototype.stop=function(){this.isPlaying&&this.action("stop")},b.prototype.getTimeBySlider=function(e){return m.time(e/100*this.totalDuration)},b.prototype.countTotalDuration=function(){this.vod&&(this.totalDuration=0,this.vod.forEach(function(e){"duration"in e&&(this.totalDuration+=parseInt(e.duration))}))},b.prototype.setFilesIndex=function(e){if(e!==this.filesIndex){this.filesIndex=e;for(var t=0,n=this.vod;e--;)"duration"in n[e]&&(t+=parseInt(n[e].duration));n=null,this.preDuration=t}},b.prototype.action=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("flash"===this.playType)try{return n&&n.length?this.swf.__externalCall(e,l()(n)):this.swf.__externalCall(e)}catch(e){console.log("action action ::: err",e)}else if("video"===this.playType)switch(e){case"play":this.isPlaying=!0,this.end=!1,this.$front&&this.$front.addClass("hide"),this.$control&&this.$control.find(".btn-pause").removeClass("hide").siblings().addClass("hide"),this.$video.src=n[0],this.$video.load(),n[1]&&(this.$video.currentTime=n[1]),this.$video.play();break;case"stop":case"togglePause":return this.isPlaying?(this.$video.pause(),this.$control&&this.$control.find(".btn-start").removeClass("hide").siblings().addClass("hide"),this.isPlaying=!1):(this.$video.play(),this.$control&&this.$control.find(".btn-pause").removeClass("hide").siblings().addClass("hide"),this.isPlaying=!0),this.isPlaying;case"seek":this.$video.currentTime=n[0];break;case"setVolume":this.$video.volume=n[0];break;case"setup":break;default:console.log(e,n)}},b.prototype.doPlay=function(){this.isPlaying=!0,this.action("setup",this.opts),this.vod?(this.setFilesIndex(0),this.action("play",this.vod[0].mp4)):this.file?this.action("play",this.file):console.log("player:::Error::play do action setup")},b.prototype.play=function(){this.addInitLoadEvent(this.doPlay)},b.prototype.fullScreen=function(){var e=document.getElementById(this.box),t=e.parentElement||e.parentNode,n=y.mobile?e:t;this.isFullScreen?(m.exitFullscreen(n),this.isFullScreen=!1):(this.isFullScreen=!0,m.launchFullscreen(n)),e=null,t=null,n=null},b.prototype.updateSliderInner=function(e){if(!this.playerSlider)return!1;var t;e>0&&(t=(this.preDuration+e)/this.totalDuration,this.playerSlider&&this.playerSlider.value(100*t,!1)),t=null},b.prototype.doTimeLine=function(){this.updateSliderInner(this.$video.currentTime)},b.prototype.timeline=function(){var e=this,t=Date.now();clearTimeout(this.timelineTimer),t-this.timelineLast>800?(this.doTimeLine(),this.timelineLast=t):(this.timelineTimer=setTimeout(function(){e.doTimeLine()},800),this.timelineLast||(this.timelineLast=t))},b.prototype.handlerEnd=function(){if(this.vod&&this.vod.length){if(this.filesIndex+1<this.vod.length)return this.setFilesIndex(this.filesIndex+1),this.action("play",this.vod[this.filesIndex].mp4),!1;this.end=!0,this.setFilesIndex(0),clearTimeout(this.timelineTimer),this.playerSlider.value(0,!1)}this.$control&&this.$control.find(".btn-start").removeClass("hide").siblings().addClass("hide")},b.prototype.appendSWF=function(){var e={uuid:this.uuid},t={allowscriptaccess:"sameDomain",allowfullscreen:"true",wmode:"transparent"},n={id:this.box,name:this.box,"data-uuid":this.uuid},i=this,r=this.swfPath||"/static/swf/player.swf";this.playType="flash",v.embedSWF(r,this.box,"100%","100%","11.1.0","",e,t,n,function(e){i.swf=e.ref,i.swf.trigger=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.trigger(t[0],t)}}),v.createCSS("#"+this.box,"background-color:#000")},b.prototype.appendVideo=function(){var e=this.box,t=this,n=document.createElement("video");this.playType="video",n.setAttribute("autoplay","autoplay"),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("id",e),n.setAttribute("x-webkit-airplay","allow"),n.setAttribute("webkit-playsinline",!0),n.setAttribute("playsinline",!0),document.getElementById(e).replaceWith(n),this.$video=n,this.$video.addEventListener("timeupdate",this.timeline.bind(this)),this.$video.addEventListener("ended",this.handlerEnd.bind(this));var i={};i.loadstart=0,i.progress=0,i.suspend=0,i.abort=0,i.error=0,i.emptied=0,i.stalled=0,i.loadedmetadata=0,i.loadeddata=0,i.canplay=0,i.canplaythrough=0,i.playing=0,i.waiting=0,i.seeking=0,i.seeked=0,i.durationchange=0,i.play=0,i.pause=0,i.ratechange=0,i.resize=0,i.volumechange=0,s()(i).forEach(function(e){n.addEventListener(e,t.trigger.bind(t,e))}),e=null,this.trigger("init")},b.prototype.setup=function(e){this.opts={autostart:"autostart"in e&&!!e.autostart,muted:e.muted||!1,args:{uid:window.current_user&&(window.current_user.id||0),liveId:window.live_info&&(window.live_info.id||"")}},r()(this.opts,e),"swfPath"in e&&(this.swfPath=e.swfPath),this.type="live","vodUri"in e?(this.type="vod",e.vodUri instanceof Array?this.vod=!!e.vodUri.length&&e.vodUri:this.vod=[{playurl:e.vodUri}],"totalDuration"in e?this.totalDuration=e.totalDuration:this.vod&&this.vod.length&&this.countTotalDuration()):y.mobile&&"hls"in this.opts&&this.opts.hls?this.opts.hls instanceof Array?this.file=this.opts.hls[0]:this.file=this.opts.hls:"rtmp"in this.opts&&this.opts.rtmp?this.opts.rtmp instanceof Array?this.file=this.opts.rtmp[0]:this.file=this.opts.rtmp:this.file="rtmpUri"in e?e.rtmpUri+"":"pullRtmpUrl"in e&&e.pullRtmpUrl+"",this.inited=!1,this.file||this.vod?this.appendPlayer():console.log("没有找到播放地址")},b.prototype.appendPlayer=function(){console.log(this.file);var e=this.type,t=this.box;return y.mobile||g&&"vod"===e?this.appendVideo():y.detachFlash?this.appendSWF():(document.getElementById(t).innerHTML='系统检测到您的浏览器未安装flash插件。请<a href="http://get.adobe.com/cn/flashplayer/" target="_blank">点击安装</a>',v.createCSS("#"+t,"color: #ccc; text-align: center; font-size: 2em; line-height: 2em; padding-top: 100px")),this},b.prototype.destroy=function(){document.getElementById(this.box).replaceWith('<div id="flashContent" style="visibility:hidden"></div>')},b.prototype.getParams=function(e){var t=m.getParams();return window&&window.current_user?t.uid=window.current_user.id||"":t.uid="",window&&window.live_info&&(t.name=window.live_info.id),t.app="live","string"==typeof this.opts.file?t.playUri=this.opts.file:this.opts.file instanceof Array&&this.opts.file.length?t.playUri=this.opts.file[0].mp4:t.playUri="",t.call=e||"play_done",t},b.prototype.sendOnPlay=function(){var e=this.getParams("play");m.sendStat(e),e=null},b.prototype.sendOnPlayDone=function(){var e=this.getParams("play_done");m.sendStat(e)},b.prototype.getMediaStatistics=function(){return"flash"===this.playType?this.swf.getMediaStatistics():null}},function(e,t,n){e.exports={default:n(19),__esModule:!0}},function(e,t,n){n(20),e.exports=n(0).Object.assign},function(e,t,n){var i=n(5);i(i.S+i.F,"Object",{assign:n(29)})},function(e,t,n){var i=n(22);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(10),r=n(28);e.exports=n(3)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(7);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)(function(){return 7!=Object.defineProperty(n(26)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(7),r=n(6).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(7);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var i=n(11),r=n(40),o=n(41),s=n(16),a=n(13),l=Object.assign;e.exports=!l||n(4)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=s(e),l=arguments.length,u=1,c=r.f,f=o.f;l>u;)for(var d,h=a(arguments[u++]),p=c?i(h).concat(c(h)):i(h),v=p.length,y=0;v>y;)f.call(h,d=p[y++])&&(n[d]=h[d]);return n}:l},function(e,t,n){var i=n(31),r=n(12),o=n(33)(!1),s=n(36)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),l=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(12),r=n(34),o=n(35);e.exports=function(e){return function(t,n,s){var a,l=i(t),u=r(l.length),c=o(s,u);if(e&&n!=n){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(15),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(15),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(37)("keys"),r=n(38);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(6),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports={default:n(43),__esModule:!0}},function(e,t,n){n(44),e.exports=n(0).Object.keys},function(e,t,n){var i=n(16),r=n(11);n(45)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(5),r=n(0),o=n(4);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(e,t,n){e.exports={default:n(47),__esModule:!0}},function(e,t,n){var i=n(0),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(49),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={default:n(50),__esModule:!0}},function(e,t,n){n(51);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(5);i(i.S+i.F*!n(3),"Object",{defineProperty:n(10).f})}]).default});
//# sourceMappingURL=Player.js.map?v=1.0.7